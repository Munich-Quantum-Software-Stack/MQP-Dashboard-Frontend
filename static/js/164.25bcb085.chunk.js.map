{"version":3,"file":"static/js/164.25bcb085.chunk.js","mappings":"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","sources":["components/Pages/Tokens/ActivedTokenListItem.js","components/Pages/Tokens/RevokedTokenListItem.js","components/Pages/Tokens/TokensList.js","components/Pages/Tokens/Tokens.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link, useSubmit } from \"react-router-dom\";\nimport { getAuthToken } from \"../../utils/auth\";\n\n\nfunction ActivedTokenListItem(props) {\n  const [isRevoking, setIsRevoking] = useState(false);\n  const submit = useSubmit();\n  const revokeTokenHandler = () => {\n\n    const proceed = window.confirm(\"Are you sure to revoke this token?\");\n    if (proceed) {\n      submit(null, { method: \"delete\" });\n    }\n    \n  };\n  \n  // remove space inside string\n  const tokenId = props.id.toLowerCase().replace(/\\s+/g, '');\n  //console.log(tokenId);\n  return (\n    <li className=\"token_item_row\">\n      <Link to={`/tokens/${tokenId}`}>\n        <div className=\"token_column token_view\">\n          <span className=\"view_icon\"></span>\n        </div>\n        <div className=\"token_column token_name\">{props.tokenName}</div>\n        <div className=\"token_column token_expired\">{props.expiration}</div>\n        <div className=\"token_column token_note\">{props.note}</div>\n        <div className=\"token_column token_actions\">\n          <button className=\"token_btn \" onClick={revokeTokenHandler}>\n            <span className=\"button_icon delete_icon\"></span>\n            Revoke\n          </button>\n        </div>\n      </Link>\n    </li>\n  );\n}\n\nexport default ActivedTokenListItem;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\n\nfunction RevokedTokenListItem(props) {\n  const tokenId = props.id.toLowerCase().replace(/\\s+/g, \"\");\n  return (\n    <li>\n      <Link to={tokenId}>\n        <div className=\"token_column token_view\">\n          <span className=\"view_icon\"></span>\n        </div>\n        <div className=\"token_column token_name\">{props.tokenName}</div>\n        <div className=\"token_column token_revoked_time\">\n          {props.revoked_timestamp}\n        </div>\n        <div className=\"token_column token_revoked_reason\">\n          {props.revoked_reason}\n        </div>\n      </Link>\n    </li>\n  );\n}\n\nexport default RevokedTokenListItem;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport ActivedTokenListItem from \"./ActivedTokenListItem\";\nimport RevokedTokenListItem from \"./RevokedTokenListItem\";\n\nfunction TokensList(props) {\n  \n\n  if (props.items === null) {\n    return <h4 className=\"text-center my-3\">No Token issued</h4>;\n  }\n  /* console.log(props); */\n  const activatedTokens = props.items.filter(\n    (token) => token.status === \"Active\"\n  );\n  const revokedTokens = props.items.filter(\n    (token) => token.status === \"Revoked\"\n  );\n  //console.log(activatedTokens);\n\n  return (\n    <React.Fragment>\n      {activatedTokens.length > 0 && (\n        <div className=\"mb-5 activatedTokensList\">\n          <h5>Actived Tokens</h5>\n          <div className=\"responsive_container\">\n            <ul className=\"subTokensList\">\n              <li className=\"token_row_header\">\n                <div className=\"token_column token_view\"></div>\n                <div className=\"token_column token_name\">Token Name</div>\n                <div className=\"token_column token_expired\">Expiration</div>\n                <div className=\"token_column token_note\">Note</div>\n                <div className=\"token_column token_actions\"></div>\n              </li>\n              {activatedTokens.map((token) => (\n                <ActivedTokenListItem\n                  key={token.id}\n                  id={token.id}\n                  tokenName={token.token_name}\n                  expiration={token.expiration}\n                  note={token.note}\n                />\n              ))}\n            </ul>\n          </div>\n        </div>\n      )}\n      {revokedTokens.length > 0 && (\n        <div className=\"mb-5 revokedTokensList\">\n          <h5>Revoked Tokens</h5>\n          <div className=\"responsive_container\">\n            <ul className=\"subTokensList\">\n              <li className=\"token_row_header\">\n                <div className=\"token_column token_view\"></div>\n                <div className=\"token_column token_name\">Token Name</div>\n                <div className=\"token_column token_expired\">Revoked Time</div>\n                <div className=\"token_column token_note\">Revoked Reason</div>\n                <div className=\"token_column token_actions\"></div>\n              </li>\n              {revokedTokens.map((token) => (\n                <RevokedTokenListItem\n                  key={token.id}\n                  id={token.id}\n                  tokenName={token.token_name}\n                  revokedTime={token.revoked_timestamp}\n                  revoked_reason={token.revoked_reason}\n                />\n              ))}\n            </ul>\n          </div>\n        </div>\n      )}\n    </React.Fragment>\n  );\n}\n\n\nexport default TokensList;","import React, { useContext, Suspense } from \"react\";\nimport { useLoaderData, json, defer, Await } from \"react-router-dom\";\nimport ContentCard from \"../../UI/Card/ContentCard\";\nimport ThemeContext from \"../../../store/theme-context\";\nimport TokensList from \"./TokensList\";\nimport NewToken from \"./NewToken\";\nimport { getAuthToken } from \"../../utils/auth\"; \n\nimport './Tokens.scss';\n\nfunction Tokens() {\n  const { tokens } = useLoaderData();\n  /* console.log(\"tokens:\");\n  console.log(tokens); */\n\n  // transform token format by adding id\n  const transformedTokens = tokens.map((token) => ({\n    id: token.token_name,\n    token_name: token.token_name,\n    expiration: token.expiration,\n    status: token.status,\n    note: token.note,\n  }));\n  \n  const ctx = useContext(ThemeContext);\n  \n  return (\n    <React.Fragment>\n      <div className=\"main_content\">\n        <NewToken />\n        <ContentCard\n          className={`${\n            ctx.darkmode ? \"dark_bg\" : \"white_bg\"\n          } tokens_container`}\n        >\n          <div className=\"listTokens_container\">\n            <div className=\"tokenContainer_header_wrap\">\n              <h4 className=\"mb-5 page_header\">All Tokens</h4>\n            </div>\n            <div className=\"tokensList_container\">\n              <Suspense\n                fallback={<p style={{ textAlign: \"center\" }}>Loading...</p>}\n              >\n                <Await resolve={transformedTokens}>\n                  {(loadedtokens) => <TokensList items={loadedtokens} />}\n                </Await>\n              </Suspense>\n            </div>\n          </div>\n        </ContentCard>\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default Tokens;\n\nasync function loaderTokensList() {\n  // fetching to tokens\n  const tokens_url = \"http://127.0.0.1:5000/tokens\";\n  const token = getAuthToken();\n  const response = await fetch(tokens_url, {\n    method: \"GET\",\n    headers: {\n      'Authorization': \"Bearer \" + token,\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  if (response.ok) {\n    const data = await response.json();\n    /* console.log(\"return data:\");\n    console.log(data); */\n    return data.tokens;\n  } else {\n    throw json({ message: \"Failed to fetch tokens!\" }, {\n      status: 500,\n    });\n  }\n}\n\nexport async function loader() {\n  return defer({\n    tokens: await loaderTokensList(),\n  });\n  \n}\n\n/* export async function action({ request }) {\n  console.log(\"Revoke is submitted!\");\n  const formData = request.formData();\n  const token_name = formData.get(\"token_name\");\n  const revoke_url = \"http://127.0.0.1:5000/tokens?action=revoke\";\n  const auth_token = getAuthToken();\n  const response = await fetch(revoke_url, {\n    method: \"POST\",\n    headers: {\n      Authorization: \"Bearer \" + auth_token,\n      \"Content-Type\": \"application/json\",\n      body: JSON.stringify(token_name),\n    },\n  });\n\n  if (!response.ok) {\n    console.log(response);\n    return response;\n  } else {\n    const resData = await response.json();\n    return resData;\n  }\n\n} */"],"names":["props","_useState","useState","_useState2","_slicedToArray","submit","useSubmit","tokenId","id","toLowerCase","replace","_jsx","className","children","_jsxs","Link","to","concat","tokenName","expiration","note","onClick","window","confirm","method","revoked_timestamp","revoked_reason","items","activatedTokens","filter","token","status","revokedTokens","React","length","map","ActivedTokenListItem","token_name","RevokedTokenListItem","revokedTime","transformedTokens","useLoaderData","tokens","ctx","useContext","ThemeContext","NewToken","ContentCard","darkmode","Suspense","fallback","style","textAlign","Await","resolve","loadedtokens","TokensList","loaderTokensList","_loaderTokensList","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_context","prev","next","getAuthToken","fetch","headers","sent","ok","json","abrupt","message","stop","loader","_loader","_callee2","_context2","t0","defer","t1","t2"],"sourceRoot":""}